C51 COMPILER V7.50   MAIN                                                                  08/20/2018 07:17:44 PAGE 1   


C51 COMPILER V7.50, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /*********************************************************************************************
   2          程序名： 　　 LED流水灯展示
   3          编写人： 　　 Jaden
   4          编写时间：　　2018 年 08月 16日
   5          硬件支持：　　STC90C52  12MHz
   6          接口说明：　　  
   7          修改日志：　　
   8          　　NO.1-                                                               
   9          /*********************************************************************************************
  10          说明：
  11          
  12          /*********************************************************************************************/
  13          #include <reg52.h>
  14          #define uint unsigned int 
  15          #define uchar unsigned char
  16          
  17          void DELAY_MS(uint t);
  18          uint keyscan();
  19          void leddisplay();
  20          
  21          uint number;
  22          
  23          /*********************************************************************************************
  24          函数名：毫秒级CPU延时函数
  25          调  用：void leddisplay();
  26          参  数：无
  27          返回值：无
  28          结  果：
  29          备  注：
  30          /*********************************************************************************************/
  31          void leddisplay()
  32          {
  33   1              P0=0XF0;
  34   1      }
  35          
  36          
  37          /*********************************************************************************************
  38          函数名：毫秒级CPU延时函数
  39          调  用：void keyscane();
  40          参  数：无
  41          返回值：无
  42          结  果：
  43          备  注：
  44          /*********************************************************************************************/
  45          uint keyscane()
  46          {
  47   1              uchar key,b;
  48   1              P1=0xf0;
  49   1              key=P0;
  50   1              if((key!=0xf0))
  51   1              {       
  52   2                      DELAY_MS(100);
  53   2                      key=P1;
  54   2                      if(key!=0xf0)
  55   2                      {
C51 COMPILER V7.50   MAIN                                                                  08/20/2018 07:17:44 PAGE 2   

  56   3                              switch(key)
  57   3                              {
  58   4                                 case 0xee: b = 1; break;
  59   4                                 case 0xed: b = 2; break;
  60   4                                 case 0xeb: b = 3; break;
  61   4                                 case 0xe7: b = 4; break;
  62   4                                 case 0xde: b = 5; break;
  63   4                                 case 0xdd: b = 6; break;
  64   4                                 case 0xdb: b = 7; break;
  65   4                                 case 0xd7: b = 8; break;
  66   4                                 case 0xbe: b = 9; break;
  67   4                                 case 0xbd: b = 10; break;
  68   4                                 case 0xbb: b = 11; break;
  69   4                                 case 0xb7: b = 12; break;
  70   4                                 case 0x7e: b = 13; break;
  71   4                                 case 0x7d: b = 14; break;
  72   4                                 case 0x7b: b = 15; break;
  73   4                                 case 0x77: b = 16; break;
  74   4                                 default:   b = 0 ; break;
  75   4                              }       
  76   3                      
  77   3                              
  78   3                      }
  79   2                      return(b);
  80   2                      
  81   2              }
  82   1              
  83   1      }
  84          
  85          
  86          /*********************************************************************************************
  87          函数名：毫秒级CPU延时函数
  88          调  用：DELAY_MS (?);
  89          参  数：1~65535（参数不可为0）
  90          返回值：无
  91          结  果：占用CPU方式延时与参数数值相同的毫秒时间
  92          备  注：应用于1T单片机时i<600，应用于12T单片机时i<125
  93          /*********************************************************************************************/
  94          void DELAY_MS(uint t)
  95          {
  96   1      
  97   1              uint i;
  98   1              while(t--!=0)
  99   1              {
 100   2                      for(i=600;i>0;i--);
 101   2              }
 102   1      }
 103          
 104          /*********************************************************************************************
 105          函数名：主函数
 106          调  用：无
 107          参  数：无
 108          返回值：无
 109          结  果：程序开始处，无限循环
 110          备  注：
 111          /**********************************************************************************************/
 112          void main()
 113          {
 114   1      
 115   1              while(1)
 116   1              {
 117   2                      number=keyscane();
C51 COMPILER V7.50   MAIN                                                                  08/20/2018 07:17:44 PAGE 3   

 118   2                      if(number==3)
 119   2                      {
 120   3                              P0=0x10;
 121   3                      }
 122   2                      if(number==1)
 123   2                      {
 124   3                              P0=0x20;
 125   3                      }
 126   2                      if(number==2)
 127   2                      {
 128   3                              P0=0x40;
 129   3                      }
 130   2              }
 131   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    251    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
